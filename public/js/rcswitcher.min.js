!function(e){var t={$switcher:e("<span>",{"class":"swraper"}).hide(),$toggler:e("<span>",{"class":"stoggler"}),$on:e("<span>",{"class":"slabel-on"}),$off:e("<span>",{"class":"slabel-off"}),$blob:e("<span>",{"class":"sblob"}),themes:["light","modern","dark","flat"]},s={start:function(t,s){this.setTemplateStyle(s,t),t.$this.each(function(r,i){this.makeSwitcher(e(i),t,s)}.bind(this)),this.behaviour(t)},makeSwitcher:function(e,s,r){var i=e.attr("name").replace(/(\[\])+$/,""),n=e.attr("value")||"",o=e.attr("type"),a="checkbox"==o?s.checkboxs:s.radios,c={components:{},$input:e};c.$switcher=t.$switcher.clone().attr({"input-name":i,"input-value":n,"input-type":o}),"rtl"==s.cssValues.dir&&c.$switcher.addClass("rtl"),c.components.$toggler=t.$toggler.clone(),c.components.$on=t.$on.clone().html(e.attr("data-ontext")||r.onText),c.components.$off=t.$off.clone().html(e.attr("data-offtext")||r.offText),c.components.$blob=t.$blob.clone(),r.reverse?c.components.$toggler.append(c.components.$off,c.components.$blob,c.components.$on).appendTo(c.$switcher):c.components.$toggler.append(c.components.$on,c.components.$blob,c.components.$off).appendTo(c.$switcher),e.before(c.$switcher),e[0].checked?(c.switcherChecked=!0,this.turnOn(c,s,!1,!0)):(c.switcherChecked=!1,this.turnOff(c,s,!1,!0)),inputDisabled=e[0].disabled,inputDisabled?(c.switcherDisabled=!0,c.$switcher.addClass("disabled").attr("title","switch is disabled!")):c.switcherDisabled=!1,(family=a.group[i])?(family.group[n]=c,family.length++):(a.group[i]=family={group:{},length:1},family.group[n]=c,a.groupLength++,"radio"==o&&(family.enabled=0,family.disabled=0,family.switchable=!1)),"radio"==o&&(inputDisabled?family.disabled++:family.enabled++,e[0].checked&&(family.checkedKey=n),family.switchable=family.enabled>=2),s.$switchers=s.$switchers.add(c.$switcher),a.length++,c.$switcher.show(),e.on("change",function(e){this.trackChanges({type:o,name:i,value:n},s)}.bind(this))},setTemplateStyle:function(e,s){if(t.$switcher.css({width:[e.width,"px"].join(""),"line-height":[e.height,"px"].join("")}).removeClass(t.themes.join(" ")).addClass(e.theme),s.cssValues.switcherWidth=e.width,s.cssValues.switcherHeight=e.height,s.cssValues.blobOffset=e.blobOffset,s.cssValues.blobWidth=s.cssValues.blobHeight=s.cssValues.switcherHeight-2*e.blobOffset,t.$blob.css({width:s.cssValues.blobWidth,height:s.cssValues.blobHeight}),e.reverse?(s.transformOff=["translateX(",s.transformDir,s.cssValues.blobWidth/2+s.cssValues.blobOffset,"px)"].join(""),s.transformOn=["translateX(",s.transformDir,s.cssValues.switcherWidth-s.cssValues.blobWidth/2-s.cssValues.blobOffset,"px)"].join("")):(s.transformOn=["translateX(",s.transformDir,s.cssValues.blobWidth/2+s.cssValues.blobOffset,"px)"].join(""),s.transformOff=["translateX(",s.transformDir,s.cssValues.switcherWidth-s.cssValues.blobWidth/2-s.cssValues.blobOffset,"px)"].join("")),s.transformOn={"-webkit-transform":s.transformOn,"-moz-transform":s.transformOn,"-o-transform":s.transformOn,"-ms-transform":s.transformOn,transform:s.transformOn},s.transformOff={"-webkit-transform":s.transformOff,"-moz-transform":s.transformOff,"-o-transform":s.transformOff,"-ms-transform":s.transformOff,transform:s.transformOff},t.$toggler.css("font-size",""),(e.height<20||e.autoFontSize)&&t.$toggler.css({"font-size":[e.height/2,"px"].join("")}),t.$switcher.css("margin",""),e.autoStick){var r,i=s.$this.first(),n=i.prev("label");if(n){r=i.parent().width(),r-=e.inputs?i.outerWidth(!0):0,r-=n.outerWidth(!0);var o=r-e.width;o-="dark"==e.theme?0:2,"rtl"==s.cssValues.dir?t.$switcher.css("margin-right",o):t.$switcher.css("margin-left",o)}}},toggle:function(e,t,s){var r,i;if("checkbox"==e.type)r=t.checkboxs.group[e.name],i=r.group[e.value],i.$input[0].disabled||(s?status=i.$input[0].checked?"turnOn":"turnOff":status=i.$input[0].checked?"turnOff":"turnOn",this[status](i,t,s));else{if(r=t.radios.group[e.name],i=r.group[e.value],s&&i.$input[0].checked==i.switcherChecked)return;if(s&&!i.$input[0].checked)return void i.$input.prop("checked",!0);!i.$input[0].disabled&&r.switchable&&r.checkedKey!=e.name&&(this.turnOff(r.group[r.checkedKey],t,s),this.turnOn(i,t,s),r.checkedKey=e.value)}},trackChanges:function(e,t){var s,r;s="checkbox"==e.type?t.checkboxs.group[e.name]:t.radios.group[e.name],r=s.group[e.value],r.$input[0].checked!=r.switcherChecked&&(r.switcherDisabled?(r.$input.prop("checked",r.switcherChecked),"radio"==e.type&&s.group[s.checkedKey].$input.prop("checked",!0)):this.toggle(e,t,!0)),r.$input[0].disabled!=r.switcherDisabled&&(r.$input[0].disabled?(r.$switcher.hasClass("disabled")||r.$switcher.addClass("disabled"),"radio"==e.type&&(s.disabled++,s.enabled--,1==r.$input[0].checked&&(s.switchable=!1)),r.switcherDisabled=!0,r.$input.trigger("disable.rcSwitcher",r)):(r.$switcher.removeClass("disabled"),r.$input.trigger("enable.rcSwitcher",r),"radio"==e.type&&(--s.disabled,++s.enabled,s.enabled-s.disabled>=2&&(s.switchable=!0)),r.switcherDisabled=!1))},turnOff:function(e,t,s,r){e.components.$toggler.css(t.transformOff).removeClass("on").addClass("off"),e.switcherChecked=!1,r||(s||e.$input.prop("checked",!1),setTimeout(function(){e.$input.trigger("turnoff.rcSwitcher",e),e.$input.trigger("toggle.rcSwitcher",[e,"turnoff"])},500))},turnOn:function(e,t,s,r){e.components.$toggler.css(t.transformOn).addClass("on").removeClass("off"),e.switcherChecked=!0,r||(s||e.$input.prop("checked",!0),setTimeout(function(){e.$input.trigger("turnon.rcSwitcher",e),e.$input.trigger("toggle.rcSwitcher",[e,"turnon"])},500))},behaviour:function(e){e.$this.on("click",function(e){e.preventDefault(),e.stopPropagation()}.bind(this)),e.$switchers.on("click",function(t){var s={};s.type=t.currentTarget.getAttribute("input-type"),s.name=t.currentTarget.getAttribute("input-name"),s.value=t.currentTarget.getAttribute("input-value"),this.toggle(s,e),t.preventDefault(),t.stopPropagation()}.bind(this))}};e.fn.rcSwitcher=function(r){var i={checkboxs:{group:{},groupLength:0,length:0},radios:{group:{},groupLength:0,length:0},$switchers:e([]),cssValues:{}};if(i.$this=this.filter("input[type=checkbox], input[type=radio]"),0!=i.$this.length)return i.cssValues.dir=window.getComputedStyle(i.$this[0],null).direction||"ltr",i.transformDir="rtl"==i.cssValues.dir?"":"-",r=e.extend({onText:"ON",offText:"OFF",reverse:!1,inputs:!1,width:56,height:20,blobOffset:1,autoFontSize:!1,theme:"light",autoStick:!1},r||{}),r.inputs||i.$this.css("display","none"),t.themes.indexOf(r.theme)==-1&&(r.theme="light"),s.start(i,r),this}}(jQuery);